{% extends "base.twig" %}

{% block content %}

	<div class="container max-w-7xl mx-auto px-4 py-12">
		<header class="text-center mb-12">
			<h1 class="text-4xl md:text-5xl lg:text-6xl font-display uppercase font-bold mb-6 text-ms-gold">{{ post.title }}</h1>
			<p class="mt-4 text-lg text-white/70 max-w-2xl mx-auto">{{ __('Une sélection raffinée signée Monsieur Sens — portions et présentations adaptées à vos événements. Parcourez par type et contactez-nous pour personnaliser.', 'awstarter') }}</p>
		</header>

		{# Menu du moment (sélection ACF par l'administrateur) #}
		{% if menu_du_moment and menu_du_moment|length > 0 %}
			<section class="mb-12">
			  <div class="flex items-center justify-between mb-6">
			    <h2 class="text-2xl font-semibold">{{ __('Menu du moment', 'awstarter') }}</h2>
			    <a href="{{ post.link }}" class="text-sm text-gray-500">{{ __('Voir tout', 'awstarter') }}</a>
			  </div>
			  <div class="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
			    {% for plat in menu_du_moment %}
			      {% include 'partial/suggestion-plat.twig' with {plat: plat} %}
			    {% endfor %}
			  </div>
			</section>
		{% endif %}

		{% for group in suggestion_groups %}
			<section class="mb-12">
			  <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
			    {# Title column / swap order based on title_left flag #}
			    <div class="order-1 md:order-{{ group.title_left ? '1' : '2' }} flex items-start">
			      <div class="sticky top-24">
			        <h2 class="text-2xl font-semibold">{{ group.title }}</h2>
						  {% if group.special %}
							  <p class="mt-3 text-sm text-gray-500">{{ __('Sur demande uniquement — devis personnalisé', 'awstarter') }}</p>
						  {% endif %}

						  {# Image rotator: une image affichée, les images des plats défilent automatiquement #}
						  {% if group.posts and group.posts|length > 0 %}
						    <div class="mt-4">
						      <div class="relative w-full h-40 rounded overflow-hidden suggestion-rotator" data-interval="3500">
						        {% for plat in group.posts %}
						          {% if plat.thumbnail %}
									<img src="{{ plat.thumbnail.src }}" alt="{{ plat.title }}" loading="lazy" class="rotator-image absolute inset-0 w-full h-full object-cover transition-opacity duration-700 {{ loop.first ? 'opacity-100' : 'opacity-0' }}" />
						          {% endif %}
						        {% endfor %}
						      </div>
						    </div>
						  {% endif %}
			      </div>
			    </div>

			    <div class="order-2 md:order-{{ group.title_left ? '2' : '1' }}">
			      {% if group.special %}
			        <div class="bg-gray-50 p-6 rounded-lg">
			          <p class="text-gray-700">{{ __('Nous proposons nos plateaux repas pour entreprises et événements. Pour les tarifs et compositions, merci de nous contacter :', 'awstarter') }} <a href="/contact" class="text-blue-600 underline">{{ __('Demander un devis', 'awstarter') }}</a>.</p>
			        </div>
			      {% elseif group.posts and group.posts|length > 0 %}
			        <div class="grid gap-4 grid-cols-1 sm:grid-cols-2">
			          {% for plat in group.posts %}
			            {% include 'partial/suggestion-plat.twig' with {plat: plat} %}
			          {% endfor %}
			        </div>
			      {% else %}
			        <p class="text-gray-600">{{ __('Aucun élément disponible pour cette section pour le moment.', 'awstarter') }}</p>
			      {% endif %}
			    </div>
			  </div>
			</section>
		{% endfor %}


		{# Bouton pour télécharger le menu complet si champ PDF présent #}
		{% if menu_pdf %}
		  <div class="mt-8 text-center">
		    <a href="{{ menu_pdf.url }}" class="inline-block bg-ms-gold text-white px-6 py-3 rounded-md font-semibold" target="_blank" rel="noopener">{{ __('Télécharger le menu complet (PDF)', 'awstarter') }}</a>
		  </div>
		{% endif %}

	</div>

{% endblock %}
